    #### :snail: redis
    redis 默认的缓存最大100m
    ##### redis存储的数据类型
    - string
    - list arrayList linkedList vector
    - set hashset,treeset linkedset
    - zset(一列存 value,一列存顺序)
    - hash (hashmap)
    ##### redis 集群管理
    redis src下面有一个 redis-trib.rb管理集群/或者用redis官方推荐的ruby
    ./redis-trib.rb create --replicas 1 127.0.0.1:7000 127.0.0.1:7001 \ 127.0.0.1:7002 127.0.0.1:7003 127.0.0.1:7004 127.0.0.1:7005

    redis集群是一个可以在多个redis节点之间进数据共享的设施。
    redis集群不支持那些同时处理多个键的redis命令，因为执行这些命令需要多个redis节点进行之间的移动数据，并且在高负载的情况下，这些命令会降低redis性能。
    并且会导致不可预估的行为。
    redis集群通过分区partition来提供一定程度上的可用性。即使集群中的一部分节点失效或者无法进行通讯，集群也可以继续使用处理命令请求。
    redis提供了以下两个好处：
    - 将数据自动切分split到多个节点能力。
    - 当集群中的一部分节点失效或者无法进行通讯的时候，任然可以继续处理命令的请求能力。

    redis集群数据共享：redis集群通过使用数据分片而非一致性哈希来实现，一个redis集群包含了16348个哈希槽 hash slot,数据库中的每个键都属于这
    16384个hash slot中的其中一个，集群使用公式CRC16 （ KEY）%16384来计算key属于那个槽。
    集群中的每个节点负责处理一部分的哈希槽，举个例子说，一个集群有三个哈希槽
    - 节点A处理 0-5500号哈希槽
    - 节点B负责处理5501-11000号哈希槽
    - 节点C负责处理11001- 16384号哈希槽
    这种将哈希槽分布到不同的节点上使得用户可以很容易的向集群中添加或者删除节点。（在数据库分布式中为了保证主键唯一用uuid，但是uuid是无序的效率非常低，我们采用 1+10.；2+10 3+10 这样不同的数据库的id就不会重复，保证了唯一  ）
    - 如果用户新添加D到集群中，那么将集群中的节点  A,b,c中的某些槽移动到D就可以了。
    - 删除节点A,可以先将A中的哈希槽移动到节点B,C然后移除空白（不包含任何哈希槽）的节点A就可以了。

     **redis中的集群中的主从复制**
     为了让集群在一部分节点下线或者说与其他节点之间无法进行通讯的时候，不阻碍正常运行，redis集群对节点使用了主从复制功能。集群中的每个节点
     都有一个或者n-1个复制品（replica）,其中一个复制品为主节点(master)，其余的为从节点（slave）。这样保证在某个节点下线的时候可以从从节点中选举主节点替代这个节点继续工作
     。

     **redis集群中的一致性保证**
     redis集群不保证数据的强一致性，在特定情况下，redis集群还是可能会丢失已经被执行的写命令。
     使用异步复制 是redis集群中可能丢失写命令的其中一个原因。
     - 客户端向主节点B发送一个写命令。
     - 主节点执行写命令，并向客户端返回命令回复。
     - 主节点B将刚刚的命令复制给它的从几点B1,B2,B3;
     为了保证性能，复制是发生在回复命令之后。所以在当节点B挡掉后，而复制还没有进行，这个时候就会丢失数据。以后可能会提供同步的执行写命令方法。

     或者说在网络发生问题的时候发生给节点B命令丢失了

     **目前对集群进行重新分片还是需要我们进行手动进行执行命令：./redis-trib.rb reshared 127.0.0.1:7000 需要指定集群中的节点地址，
     redi-trib会自动找集群中的其他节点。还没有实现自动将哈希槽从一个节点移动到另外一个节点**


     ###### 添加新节点到集群
     添加新节点到集群里面有两种方法
     - 如果添加的新节点是一个主节点那么久需要我们创建一个空节点，然后将某些哈希槽移动到这个空节点里面。
     - 如果添加的新节点是从节点。那么我们需要将这个新节点设置为集群中的某个节点的复制品 replica.


     ###### redis
